var content=(function(){"use strict";function f(e){return e}const a=globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome;function s(){var e="/home/jesse/wsl-projects/personal/typescript/agnostic-devkit/src/entrypoints/content.ts",t="bb3bc8e438339e789bcc197e446f11720bf92825",n=globalThis,r="__coverage__",i={path:"/home/jesse/wsl-projects/personal/typescript/agnostic-devkit/src/entrypoints/content.ts",statementMap:{0:{start:{line:7,column:4},end:{line:23,column:5}},1:{start:{line:8,column:6},end:{line:13,column:8}},2:{start:{line:11,column:10},end:{line:11,column:63}},3:{start:{line:14,column:6},end:{line:20,column:8}},4:{start:{line:16,column:10},end:{line:16,column:69}},5:{start:{line:17,column:10},end:{line:17,column:43}},6:{start:{line:18,column:10},end:{line:18,column:22}},7:{start:{line:22,column:6},end:{line:22,column:55}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:6,column:2},end:{line:6,column:3}},loc:{start:{line:6,column:9},end:{line:24,column:3}},line:6},1:{name:"(anonymous_1)",decl:{start:{line:10,column:8},end:{line:10,column:9}},loc:{start:{line:10,column:22},end:{line:12,column:9}},line:10},2:{name:"(anonymous_2)",decl:{start:{line:15,column:8},end:{line:15,column:9}},loc:{start:{line:15,column:44},end:{line:19,column:9}},line:15}},branchMap:{},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},f:{0:0,1:0,2:0},b:{},inputSourceMap:{version:3,file:null,sources:["/home/jesse/wsl-projects/personal/typescript/agnostic-devkit/src/entrypoints/content.ts"],names:[],mappings:";;AAAA;AAAmC;AACZ;AACf;AAEN;AAEC;AAAiB;AACS;AAExB;AAAmD;AACpD;AAID;AAA2B;AAMzB;AACA;AAEA;AAAO;AACR;AACD;AAEA;AAA+C;AAChD;AAEF;"},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bb3bc8e438339e789bcc197e446f11720bf92825"},o=n[r]||(n[r]={});(!o[e]||o[e].hash!==t)&&(o[e]=i);var h=o[e];return s=function(){return h},h}s();const A={matches:["<all_urls>"],runAt:"document_end",main(){s().f[0]++,s().s[0]++;try{s().s[1]++,a.runtime?.sendMessage({type:"CONTENT_LOADED"},e=>{s().f[1]++,s().s[2]++,console.debug("Response from background:",e)}),s().s[3]++,a.runtime?.onMessage.addListener((e,t,n)=>(s().f[2]++,s().s[4]++,console.debug("Content script received message:",e),s().s[5]++,n({received:!0}),s().s[6]++,!0))}catch(e){s().s[7]++,console.error("Error in content script:",e)}}};function l(e,...t){}const g={debug:(...e)=>l(console.debug,...e),log:(...e)=>l(console.log,...e),warn:(...e)=>l(console.warn,...e),error:(...e)=>l(console.error,...e)};class u extends Event{constructor(t,n){super(u.EVENT_NAME,{}),this.newUrl=t,this.oldUrl=n}static EVENT_NAME=m("wxt:locationchange")}function m(e){return`${a?.runtime?.id}:content:${e}`}function p(e){let t,n;return{run(){t==null&&(n=new URL(location.href),t=e.setInterval(()=>{let r=new URL(location.href);r.href!==n.href&&(window.dispatchEvent(new u(r,n)),n=r)},1e3))}}}class c{constructor(t,n){this.contentScriptName=t,this.options=n,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}static SCRIPT_STARTED_MESSAGE_TYPE=m("wxt:content-script-started");isTopFrame=window.self===window.top;abortController;locationWatcher=p(this);receivedMessageIds=new Set;get signal(){return this.abortController.signal}abort(t){return this.abortController.abort(t)}get isInvalid(){return a.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(t){return this.signal.addEventListener("abort",t),()=>this.signal.removeEventListener("abort",t)}block(){return new Promise(()=>{})}setInterval(t,n){const r=setInterval(()=>{this.isValid&&t()},n);return this.onInvalidated(()=>clearInterval(r)),r}setTimeout(t,n){const r=setTimeout(()=>{this.isValid&&t()},n);return this.onInvalidated(()=>clearTimeout(r)),r}requestAnimationFrame(t){const n=requestAnimationFrame((...r)=>{this.isValid&&t(...r)});return this.onInvalidated(()=>cancelAnimationFrame(n)),n}requestIdleCallback(t,n){const r=requestIdleCallback((...i)=>{this.signal.aborted||t(...i)},n);return this.onInvalidated(()=>cancelIdleCallback(r)),r}addEventListener(t,n,r,i){n==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),t.addEventListener?.(n.startsWith("wxt:")?m(n):n,r,{...i,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),g.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:c.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(t){const n=t.data?.type===c.SCRIPT_STARTED_MESSAGE_TYPE,r=t.data?.contentScriptName===this.contentScriptName,i=!this.receivedMessageIds.has(t.data?.messageId);return n&&r&&i}listenForNewerScripts(t){let n=!0;const r=i=>{if(this.verifyScriptStartedEvent(i)){this.receivedMessageIds.add(i.data.messageId);const o=n;if(n=!1,o&&t?.ignoreFirstEvent)return;this.notifyInvalidated()}};addEventListener("message",r),this.onInvalidated(()=>removeEventListener("message",r))}}function E(){}function d(e,...t){}const v={debug:(...e)=>d(console.debug,...e),log:(...e)=>d(console.log,...e),warn:(...e)=>d(console.warn,...e),error:(...e)=>d(console.error,...e)};return(async()=>{try{const{main:e,...t}=A,n=new c("content",t);return await e(n)}catch(e){throw v.error('The content script "content" crashed on startup!',e),e}})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGVudC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3d4dC9kaXN0L3V0aWxzL2RlZmluZS1jb250ZW50LXNjcmlwdC5tanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvd3h0L2Rpc3QvYnJvd3Nlci5tanMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHd4dC1kZXYvYnJvd3Nlci9zcmMvaW5kZXgubWpzIiwiLi4vLi4vLi4vc3JjL2VudHJ5cG9pbnRzL2NvbnRlbnQudHMiLCIuLi8uLi8uLi9ub2RlX21vZHVsZXMvd3h0L2Rpc3QvdXRpbHMvaW50ZXJuYWwvbG9nZ2VyLm1qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy93eHQvZGlzdC91dGlscy9pbnRlcm5hbC9jdXN0b20tZXZlbnRzLm1qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy93eHQvZGlzdC91dGlscy9pbnRlcm5hbC9sb2NhdGlvbi13YXRjaGVyLm1qcyIsIi4uLy4uLy4uL25vZGVfbW9kdWxlcy93eHQvZGlzdC91dGlscy9jb250ZW50LXNjcmlwdC1jb250ZXh0Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZGVmaW5lQ29udGVudFNjcmlwdChkZWZpbml0aW9uKSB7XG4gIHJldHVybiBkZWZpbml0aW9uO1xufVxuIiwiaW1wb3J0IHsgYnJvd3NlciBhcyBfYnJvd3NlciB9IGZyb20gXCJAd3h0LWRldi9icm93c2VyXCI7XG5leHBvcnQgY29uc3QgYnJvd3NlciA9IF9icm93c2VyO1xuZXhwb3J0IHt9O1xuIiwiLy8gI3JlZ2lvbiBzbmlwcGV0XG5leHBvcnQgY29uc3QgYnJvd3NlciA9IGdsb2JhbFRoaXMuYnJvd3Nlcj8ucnVudGltZT8uaWRcbiAgPyBnbG9iYWxUaGlzLmJyb3dzZXJcbiAgOiBnbG9iYWxUaGlzLmNocm9tZTtcbi8vICNlbmRyZWdpb24gc25pcHBldFxuIiwiZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29udGVudFNjcmlwdCh7XG5cdG1hdGNoZXM6IFtcIjxhbGxfdXJscz5cIl0sXG5cdHJ1bkF0OiBcImRvY3VtZW50X2VuZFwiLFxuXHRtYWluKCkge1xuXHRcdHRyeSB7XG5cdFx0XHQvLyBFeGFtcGxlOiBTZW5kIGEgbWVzc2FnZSB0byB0aGUgYmFja2dyb3VuZCBzY3JpcHRcblx0XHRcdGJyb3dzZXIucnVudGltZT8uc2VuZE1lc3NhZ2UoXG5cdFx0XHRcdHsgdHlwZTogXCJDT05URU5UX0xPQURFRFwiIH0sXG5cdFx0XHRcdChyZXNwb25zZTogYW55KSA9PiB7XG5cdFx0XHRcdFx0Y29uc29sZS5kZWJ1ZyhcIlJlc3BvbnNlIGZyb20gYmFja2dyb3VuZDpcIiwgcmVzcG9uc2UpO1xuXHRcdFx0XHR9XG5cdFx0XHQpO1xuXG5cdFx0XHQvLyBFeGFtcGxlOiBMaXN0ZW4gZm9yIG1lc3NhZ2VzIGZyb20gdGhlIHBvcHVwIG9yIGJhY2tncm91bmRcblx0XHRcdGJyb3dzZXIucnVudGltZT8ub25NZXNzYWdlLmFkZExpc3RlbmVyKFxuXHRcdFx0XHQoXG5cdFx0XHRcdFx0bWVzc2FnZTogYW55LFxuXHRcdFx0XHRcdF9zZW5kZXI6IGFueSxcblx0XHRcdFx0XHRzZW5kUmVzcG9uc2U6IChyZXNwb25zZT86IGFueSkgPT4gdm9pZFxuXHRcdFx0XHQpID0+IHtcblx0XHRcdFx0XHRjb25zb2xlLmRlYnVnKFwiQ29udGVudCBzY3JpcHQgcmVjZWl2ZWQgbWVzc2FnZTpcIiwgbWVzc2FnZSk7XG5cdFx0XHRcdFx0c2VuZFJlc3BvbnNlKHsgcmVjZWl2ZWQ6IHRydWUgfSk7XG5cblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZSBhcyBjb25zdDtcblx0XHRcdFx0fVxuXHRcdFx0KTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIkVycm9yIGluIGNvbnRlbnQgc2NyaXB0OlwiLCBlcnJvcik7XG5cdFx0fVxuXHR9LFxufSk7XG5cbiIsImZ1bmN0aW9uIHByaW50KG1ldGhvZCwgLi4uYXJncykge1xuICBpZiAoaW1wb3J0Lm1ldGEuZW52Lk1PREUgPT09IFwicHJvZHVjdGlvblwiKSByZXR1cm47XG4gIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBhcmdzLnNoaWZ0KCk7XG4gICAgbWV0aG9kKGBbd3h0XSAke21lc3NhZ2V9YCwgLi4uYXJncyk7XG4gIH0gZWxzZSB7XG4gICAgbWV0aG9kKFwiW3d4dF1cIiwgLi4uYXJncyk7XG4gIH1cbn1cbmV4cG9ydCBjb25zdCBsb2dnZXIgPSB7XG4gIGRlYnVnOiAoLi4uYXJncykgPT4gcHJpbnQoY29uc29sZS5kZWJ1ZywgLi4uYXJncyksXG4gIGxvZzogKC4uLmFyZ3MpID0+IHByaW50KGNvbnNvbGUubG9nLCAuLi5hcmdzKSxcbiAgd2FybjogKC4uLmFyZ3MpID0+IHByaW50KGNvbnNvbGUud2FybiwgLi4uYXJncyksXG4gIGVycm9yOiAoLi4uYXJncykgPT4gcHJpbnQoY29uc29sZS5lcnJvciwgLi4uYXJncylcbn07XG4iLCJpbXBvcnQgeyBicm93c2VyIH0gZnJvbSBcInd4dC9icm93c2VyXCI7XG5leHBvcnQgY2xhc3MgV3h0TG9jYXRpb25DaGFuZ2VFdmVudCBleHRlbmRzIEV2ZW50IHtcbiAgY29uc3RydWN0b3IobmV3VXJsLCBvbGRVcmwpIHtcbiAgICBzdXBlcihXeHRMb2NhdGlvbkNoYW5nZUV2ZW50LkVWRU5UX05BTUUsIHt9KTtcbiAgICB0aGlzLm5ld1VybCA9IG5ld1VybDtcbiAgICB0aGlzLm9sZFVybCA9IG9sZFVybDtcbiAgfVxuICBzdGF0aWMgRVZFTlRfTkFNRSA9IGdldFVuaXF1ZUV2ZW50TmFtZShcInd4dDpsb2NhdGlvbmNoYW5nZVwiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRVbmlxdWVFdmVudE5hbWUoZXZlbnROYW1lKSB7XG4gIHJldHVybiBgJHticm93c2VyPy5ydW50aW1lPy5pZH06JHtpbXBvcnQubWV0YS5lbnYuRU5UUllQT0lOVH06JHtldmVudE5hbWV9YDtcbn1cbiIsImltcG9ydCB7IFd4dExvY2F0aW9uQ2hhbmdlRXZlbnQgfSBmcm9tIFwiLi9jdXN0b20tZXZlbnRzLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUxvY2F0aW9uV2F0Y2hlcihjdHgpIHtcbiAgbGV0IGludGVydmFsO1xuICBsZXQgb2xkVXJsO1xuICByZXR1cm4ge1xuICAgIC8qKlxuICAgICAqIEVuc3VyZSB0aGUgbG9jYXRpb24gd2F0Y2hlciBpcyBhY3RpdmVseSBsb29raW5nIGZvciBVUkwgY2hhbmdlcy4gSWYgaXQncyBhbHJlYWR5IHdhdGNoaW5nLFxuICAgICAqIHRoaXMgaXMgYSBub29wLlxuICAgICAqL1xuICAgIHJ1bigpIHtcbiAgICAgIGlmIChpbnRlcnZhbCAhPSBudWxsKSByZXR1cm47XG4gICAgICBvbGRVcmwgPSBuZXcgVVJMKGxvY2F0aW9uLmhyZWYpO1xuICAgICAgaW50ZXJ2YWwgPSBjdHguc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICBsZXQgbmV3VXJsID0gbmV3IFVSTChsb2NhdGlvbi5ocmVmKTtcbiAgICAgICAgaWYgKG5ld1VybC5ocmVmICE9PSBvbGRVcmwuaHJlZikge1xuICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBXeHRMb2NhdGlvbkNoYW5nZUV2ZW50KG5ld1VybCwgb2xkVXJsKSk7XG4gICAgICAgICAgb2xkVXJsID0gbmV3VXJsO1xuICAgICAgICB9XG4gICAgICB9LCAxZTMpO1xuICAgIH1cbiAgfTtcbn1cbiIsImltcG9ydCB7IGJyb3dzZXIgfSBmcm9tIFwid3h0L2Jyb3dzZXJcIjtcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCIuLi91dGlscy9pbnRlcm5hbC9sb2dnZXIubWpzXCI7XG5pbXBvcnQge1xuICBnZXRVbmlxdWVFdmVudE5hbWVcbn0gZnJvbSBcIi4vaW50ZXJuYWwvY3VzdG9tLWV2ZW50cy5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUxvY2F0aW9uV2F0Y2hlciB9IGZyb20gXCIuL2ludGVybmFsL2xvY2F0aW9uLXdhdGNoZXIubWpzXCI7XG5leHBvcnQgY2xhc3MgQ29udGVudFNjcmlwdENvbnRleHQge1xuICBjb25zdHJ1Y3Rvcihjb250ZW50U2NyaXB0TmFtZSwgb3B0aW9ucykge1xuICAgIHRoaXMuY29udGVudFNjcmlwdE5hbWUgPSBjb250ZW50U2NyaXB0TmFtZTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGlmICh0aGlzLmlzVG9wRnJhbWUpIHtcbiAgICAgIHRoaXMubGlzdGVuRm9yTmV3ZXJTY3JpcHRzKHsgaWdub3JlRmlyc3RFdmVudDogdHJ1ZSB9KTtcbiAgICAgIHRoaXMuc3RvcE9sZFNjcmlwdHMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5saXN0ZW5Gb3JOZXdlclNjcmlwdHMoKTtcbiAgICB9XG4gIH1cbiAgc3RhdGljIFNDUklQVF9TVEFSVEVEX01FU1NBR0VfVFlQRSA9IGdldFVuaXF1ZUV2ZW50TmFtZShcbiAgICBcInd4dDpjb250ZW50LXNjcmlwdC1zdGFydGVkXCJcbiAgKTtcbiAgaXNUb3BGcmFtZSA9IHdpbmRvdy5zZWxmID09PSB3aW5kb3cudG9wO1xuICBhYm9ydENvbnRyb2xsZXI7XG4gIGxvY2F0aW9uV2F0Y2hlciA9IGNyZWF0ZUxvY2F0aW9uV2F0Y2hlcih0aGlzKTtcbiAgcmVjZWl2ZWRNZXNzYWdlSWRzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgZ2V0IHNpZ25hbCgpIHtcbiAgICByZXR1cm4gdGhpcy5hYm9ydENvbnRyb2xsZXIuc2lnbmFsO1xuICB9XG4gIGFib3J0KHJlYXNvbikge1xuICAgIHJldHVybiB0aGlzLmFib3J0Q29udHJvbGxlci5hYm9ydChyZWFzb24pO1xuICB9XG4gIGdldCBpc0ludmFsaWQoKSB7XG4gICAgaWYgKGJyb3dzZXIucnVudGltZS5pZCA9PSBudWxsKSB7XG4gICAgICB0aGlzLm5vdGlmeUludmFsaWRhdGVkKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNpZ25hbC5hYm9ydGVkO1xuICB9XG4gIGdldCBpc1ZhbGlkKCkge1xuICAgIHJldHVybiAhdGhpcy5pc0ludmFsaWQ7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIGxpc3RlbmVyIHRoYXQgaXMgY2FsbGVkIHdoZW4gdGhlIGNvbnRlbnQgc2NyaXB0J3MgY29udGV4dCBpcyBpbnZhbGlkYXRlZC5cbiAgICpcbiAgICogQHJldHVybnMgQSBmdW5jdGlvbiB0byByZW1vdmUgdGhlIGxpc3RlbmVyLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBicm93c2VyLnJ1bnRpbWUub25NZXNzYWdlLmFkZExpc3RlbmVyKGNiKTtcbiAgICogY29uc3QgcmVtb3ZlSW52YWxpZGF0ZWRMaXN0ZW5lciA9IGN0eC5vbkludmFsaWRhdGVkKCgpID0+IHtcbiAgICogICBicm93c2VyLnJ1bnRpbWUub25NZXNzYWdlLnJlbW92ZUxpc3RlbmVyKGNiKTtcbiAgICogfSlcbiAgICogLy8gLi4uXG4gICAqIHJlbW92ZUludmFsaWRhdGVkTGlzdGVuZXIoKTtcbiAgICovXG4gIG9uSW52YWxpZGF0ZWQoY2IpIHtcbiAgICB0aGlzLnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgY2IpO1xuICAgIHJldHVybiAoKSA9PiB0aGlzLnNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgY2IpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm4gYSBwcm9taXNlIHRoYXQgbmV2ZXIgcmVzb2x2ZXMuIFVzZWZ1bCBpZiB5b3UgaGF2ZSBhbiBhc3luYyBmdW5jdGlvbiB0aGF0IHNob3VsZG4ndCBydW5cbiAgICogYWZ0ZXIgdGhlIGNvbnRleHQgaXMgZXhwaXJlZC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY29uc3QgZ2V0VmFsdWVGcm9tU3RvcmFnZSA9IGFzeW5jICgpID0+IHtcbiAgICogICBpZiAoY3R4LmlzSW52YWxpZCkgcmV0dXJuIGN0eC5ibG9jaygpO1xuICAgKlxuICAgKiAgIC8vIC4uLlxuICAgKiB9XG4gICAqL1xuICBibG9jaygpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKCkgPT4ge1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBXcmFwcGVyIGFyb3VuZCBgd2luZG93LnNldEludGVydmFsYCB0aGF0IGF1dG9tYXRpY2FsbHkgY2xlYXJzIHRoZSBpbnRlcnZhbCB3aGVuIGludmFsaWRhdGVkLlxuICAgKlxuICAgKiBJbnRlcnZhbHMgY2FuIGJlIGNsZWFyZWQgYnkgY2FsbGluZyB0aGUgbm9ybWFsIGBjbGVhckludGVydmFsYCBmdW5jdGlvbi5cbiAgICovXG4gIHNldEludGVydmFsKGhhbmRsZXIsIHRpbWVvdXQpIHtcbiAgICBjb25zdCBpZCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIGlmICh0aGlzLmlzVmFsaWQpIGhhbmRsZXIoKTtcbiAgICB9LCB0aW1lb3V0KTtcbiAgICB0aGlzLm9uSW52YWxpZGF0ZWQoKCkgPT4gY2xlYXJJbnRlcnZhbChpZCkpO1xuICAgIHJldHVybiBpZDtcbiAgfVxuICAvKipcbiAgICogV3JhcHBlciBhcm91bmQgYHdpbmRvdy5zZXRUaW1lb3V0YCB0aGF0IGF1dG9tYXRpY2FsbHkgY2xlYXJzIHRoZSBpbnRlcnZhbCB3aGVuIGludmFsaWRhdGVkLlxuICAgKlxuICAgKiBUaW1lb3V0cyBjYW4gYmUgY2xlYXJlZCBieSBjYWxsaW5nIHRoZSBub3JtYWwgYHNldFRpbWVvdXRgIGZ1bmN0aW9uLlxuICAgKi9cbiAgc2V0VGltZW91dChoYW5kbGVyLCB0aW1lb3V0KSB7XG4gICAgY29uc3QgaWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICh0aGlzLmlzVmFsaWQpIGhhbmRsZXIoKTtcbiAgICB9LCB0aW1lb3V0KTtcbiAgICB0aGlzLm9uSW52YWxpZGF0ZWQoKCkgPT4gY2xlYXJUaW1lb3V0KGlkKSk7XG4gICAgcmV0dXJuIGlkO1xuICB9XG4gIC8qKlxuICAgKiBXcmFwcGVyIGFyb3VuZCBgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZWAgdGhhdCBhdXRvbWF0aWNhbGx5IGNhbmNlbHMgdGhlIHJlcXVlc3Qgd2hlblxuICAgKiBpbnZhbGlkYXRlZC5cbiAgICpcbiAgICogQ2FsbGJhY2tzIGNhbiBiZSBjYW5jZWxlZCBieSBjYWxsaW5nIHRoZSBub3JtYWwgYGNhbmNlbEFuaW1hdGlvbkZyYW1lYCBmdW5jdGlvbi5cbiAgICovXG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjaykge1xuICAgIGNvbnN0IGlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCguLi5hcmdzKSA9PiB7XG4gICAgICBpZiAodGhpcy5pc1ZhbGlkKSBjYWxsYmFjayguLi5hcmdzKTtcbiAgICB9KTtcbiAgICB0aGlzLm9uSW52YWxpZGF0ZWQoKCkgPT4gY2FuY2VsQW5pbWF0aW9uRnJhbWUoaWQpKTtcbiAgICByZXR1cm4gaWQ7XG4gIH1cbiAgLyoqXG4gICAqIFdyYXBwZXIgYXJvdW5kIGB3aW5kb3cucmVxdWVzdElkbGVDYWxsYmFja2AgdGhhdCBhdXRvbWF0aWNhbGx5IGNhbmNlbHMgdGhlIHJlcXVlc3Qgd2hlblxuICAgKiBpbnZhbGlkYXRlZC5cbiAgICpcbiAgICogQ2FsbGJhY2tzIGNhbiBiZSBjYW5jZWxlZCBieSBjYWxsaW5nIHRoZSBub3JtYWwgYGNhbmNlbElkbGVDYWxsYmFja2AgZnVuY3Rpb24uXG4gICAqL1xuICByZXF1ZXN0SWRsZUNhbGxiYWNrKGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgY29uc3QgaWQgPSByZXF1ZXN0SWRsZUNhbGxiYWNrKCguLi5hcmdzKSA9PiB7XG4gICAgICBpZiAoIXRoaXMuc2lnbmFsLmFib3J0ZWQpIGNhbGxiYWNrKC4uLmFyZ3MpO1xuICAgIH0sIG9wdGlvbnMpO1xuICAgIHRoaXMub25JbnZhbGlkYXRlZCgoKSA9PiBjYW5jZWxJZGxlQ2FsbGJhY2soaWQpKTtcbiAgICByZXR1cm4gaWQ7XG4gIH1cbiAgYWRkRXZlbnRMaXN0ZW5lcih0YXJnZXQsIHR5cGUsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZSA9PT0gXCJ3eHQ6bG9jYXRpb25jaGFuZ2VcIikge1xuICAgICAgaWYgKHRoaXMuaXNWYWxpZCkgdGhpcy5sb2NhdGlvbldhdGNoZXIucnVuKCk7XG4gICAgfVxuICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyPy4oXG4gICAgICB0eXBlLnN0YXJ0c1dpdGgoXCJ3eHQ6XCIpID8gZ2V0VW5pcXVlRXZlbnROYW1lKHR5cGUpIDogdHlwZSxcbiAgICAgIGhhbmRsZXIsXG4gICAgICB7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIHNpZ25hbDogdGhpcy5zaWduYWxcbiAgICAgIH1cbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICogQWJvcnQgdGhlIGFib3J0IGNvbnRyb2xsZXIgYW5kIGV4ZWN1dGUgYWxsIGBvbkludmFsaWRhdGVkYCBsaXN0ZW5lcnMuXG4gICAqL1xuICBub3RpZnlJbnZhbGlkYXRlZCgpIHtcbiAgICB0aGlzLmFib3J0KFwiQ29udGVudCBzY3JpcHQgY29udGV4dCBpbnZhbGlkYXRlZFwiKTtcbiAgICBsb2dnZXIuZGVidWcoXG4gICAgICBgQ29udGVudCBzY3JpcHQgXCIke3RoaXMuY29udGVudFNjcmlwdE5hbWV9XCIgY29udGV4dCBpbnZhbGlkYXRlZGBcbiAgICApO1xuICB9XG4gIHN0b3BPbGRTY3JpcHRzKCkge1xuICAgIHdpbmRvdy5wb3N0TWVzc2FnZShcbiAgICAgIHtcbiAgICAgICAgdHlwZTogQ29udGVudFNjcmlwdENvbnRleHQuU0NSSVBUX1NUQVJURURfTUVTU0FHRV9UWVBFLFxuICAgICAgICBjb250ZW50U2NyaXB0TmFtZTogdGhpcy5jb250ZW50U2NyaXB0TmFtZSxcbiAgICAgICAgbWVzc2FnZUlkOiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKVxuICAgICAgfSxcbiAgICAgIFwiKlwiXG4gICAgKTtcbiAgfVxuICB2ZXJpZnlTY3JpcHRTdGFydGVkRXZlbnQoZXZlbnQpIHtcbiAgICBjb25zdCBpc1NjcmlwdFN0YXJ0ZWRFdmVudCA9IGV2ZW50LmRhdGE/LnR5cGUgPT09IENvbnRlbnRTY3JpcHRDb250ZXh0LlNDUklQVF9TVEFSVEVEX01FU1NBR0VfVFlQRTtcbiAgICBjb25zdCBpc1NhbWVDb250ZW50U2NyaXB0ID0gZXZlbnQuZGF0YT8uY29udGVudFNjcmlwdE5hbWUgPT09IHRoaXMuY29udGVudFNjcmlwdE5hbWU7XG4gICAgY29uc3QgaXNOb3REdXBsaWNhdGUgPSAhdGhpcy5yZWNlaXZlZE1lc3NhZ2VJZHMuaGFzKGV2ZW50LmRhdGE/Lm1lc3NhZ2VJZCk7XG4gICAgcmV0dXJuIGlzU2NyaXB0U3RhcnRlZEV2ZW50ICYmIGlzU2FtZUNvbnRlbnRTY3JpcHQgJiYgaXNOb3REdXBsaWNhdGU7XG4gIH1cbiAgbGlzdGVuRm9yTmV3ZXJTY3JpcHRzKG9wdGlvbnMpIHtcbiAgICBsZXQgaXNGaXJzdCA9IHRydWU7XG4gICAgY29uc3QgY2IgPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmICh0aGlzLnZlcmlmeVNjcmlwdFN0YXJ0ZWRFdmVudChldmVudCkpIHtcbiAgICAgICAgdGhpcy5yZWNlaXZlZE1lc3NhZ2VJZHMuYWRkKGV2ZW50LmRhdGEubWVzc2FnZUlkKTtcbiAgICAgICAgY29uc3Qgd2FzRmlyc3QgPSBpc0ZpcnN0O1xuICAgICAgICBpc0ZpcnN0ID0gZmFsc2U7XG4gICAgICAgIGlmICh3YXNGaXJzdCAmJiBvcHRpb25zPy5pZ25vcmVGaXJzdEV2ZW50KSByZXR1cm47XG4gICAgICAgIHRoaXMubm90aWZ5SW52YWxpZGF0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGNiKTtcbiAgICB0aGlzLm9uSW52YWxpZGF0ZWQoKCkgPT4gcmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgY2IpKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImRlZmluZUNvbnRlbnRTY3JpcHQiLCJkZWZpbml0aW9uIiwiYnJvd3NlciIsImNvdl9sNW50bG44MmgiLCJhY3R1YWxDb3ZlcmFnZSIsInJ1bkF0IiwibWFpbiIsInMiLCJydW50aW1lIiwic2VuZE1lc3NhZ2UiLCJ0eXBlIiwiY29uc29sZSIsInJlc3BvbnNlIiwib25NZXNzYWdlIiwibWVzc2FnZSIsIl9zZW5kZXIiLCJzZW5kUmVzcG9uc2UiLCJyZWNlaXZlZCIsImVycm9yIiwicHJpbnQiLCJtZXRob2QiLCJhcmdzIiwibG9nZ2VyIiwiV3h0TG9jYXRpb25DaGFuZ2VFdmVudCIsIm5ld1VybCIsIm9sZFVybCIsImdldFVuaXF1ZUV2ZW50TmFtZSIsImV2ZW50TmFtZSIsImNyZWF0ZUxvY2F0aW9uV2F0Y2hlciIsImN0eCIsImludGVydmFsIiwiQ29udGVudFNjcmlwdENvbnRleHQiLCJjb250ZW50U2NyaXB0TmFtZSIsIm9wdGlvbnMiLCJyZWFzb24iLCJjYiIsImhhbmRsZXIiLCJ0aW1lb3V0IiwiaWQiLCJjYWxsYmFjayIsInRhcmdldCIsImV2ZW50IiwiaXNTY3JpcHRTdGFydGVkRXZlbnQiLCJpc1NhbWVDb250ZW50U2NyaXB0IiwiaXNOb3REdXBsaWNhdGUiLCJpc0ZpcnN0Iiwid2FzRmlyc3QiXSwibWFwcGluZ3MiOiJxQ0FBTyxTQUFTQSxFQUFvQkMsRUFBWSxDQUM5QyxPQUFPQSxDQUNULENDRE8sTUFBTUMsRUNBVSxXQUFXLFNBQVMsU0FBUyxHQUNoRCxXQUFXLFFBQ1gsV0FBVyxtcERDaUJWLE9BQUFDLEVBQUFDLFVBQUEsQ0FBQSxPQUFBQSxDQUFBLEVBQUFBLENBQUFELGFBcEI4QixDQUNaRSxRQUFBLENBQUEsWUFBQSxFQUNmQyxNQUFBLGVBQUFILE1BQUFBLENBQUFBLEVBQUEsRUFBQUksRUFBQSxDQUFBLElBRU5KLEVBQUEsRUFBQSxFQUFBLENBQUEsSUFBQUEsR0FBQUEsQ0FFQ0QsRUFBQU0sRUFBQSxFQUFBQyxDQUFBQSxJQUFpQkMsRUFBQSxTQUFBLFlBQUEs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
content;